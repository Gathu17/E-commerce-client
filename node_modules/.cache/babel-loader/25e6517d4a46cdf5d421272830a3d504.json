{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/GATHU/Desktop/E-client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"C:/Users/GATHU/Desktop/E-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject;import React,{useContext,useState}from'react';import{Form,Checkbox,Button}from'semantic-ui-react';import useForm from'../util/hooks';import{AuthContext}from'../util/auth';import{useNavigate}from'react-router';import{gql,useMutation}from'@apollo/client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useForm=useForm(loginUserCallback,{username:'',password:''}),onChange=_useForm.onChange,onSubmit=_useForm.onSubmit,values=_useForm.values;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var context=useContext(AuthContext);var Navigate=useNavigate();var _useMutation=useMutation(LOGIN_USER,{update:function update(_,_ref){var userData=_ref.data.login;context.login(userData);Navigate('/Products');},onError:function onError(err){console.log(err.graphQLErrors[0].extensions.errors);setErrors(err.graphQLErrors[0].extensions.errors);},variables:values}),_useMutation2=_slicedToArray(_useMutation,2),loginUser=_useMutation2[0],loading=_useMutation2[1].loading;function loginUserCallback(){loginUser();}return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,className:loading?'loading':'',children:[/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Username\",name:\"username\",type:\"text\",value:values.username,onChange:onChange})]}),/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",name:\"password\",type:\"password\",value:values.password,onChange:onChange})]}),/*#__PURE__*/_jsx(Form.Field,{children:/*#__PURE__*/_jsx(Checkbox,{label:\"I agree to the Terms and Conditions\"})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Login\"})]}),Object.keys(errors).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"ui error message\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:Object.values(errors).map(function(value){return/*#__PURE__*/_jsx(\"li\",{children:value},value);})})})]})});}var LOGIN_USER=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n   mutation login(\\n       $username: String!\\n       $password: String!\\n   ){\\n       login(username:$username,password:$password){\\n           id\\n           username\\n           email\\n           token\\n           createdAt\\n       }\\n   }\\n\"])));export default Login;","map":{"version":3,"sources":["C:/Users/GATHU/Desktop/E-client/src/Pages/Login.js"],"names":["React","useContext","useState","Form","Checkbox","Button","useForm","AuthContext","useNavigate","gql","useMutation","Login","loginUserCallback","username","password","onChange","onSubmit","values","errors","setErrors","context","Navigate","LOGIN_USER","update","_","userData","data","login","onError","err","console","log","graphQLErrors","extensions","variables","loginUser","loading","Object","keys","length","map","value"],"mappings":"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","sourcesContent":["import React, {useContext,useState } from 'react';\r\nimport {Form, Checkbox, Button} from 'semantic-ui-react'\r\nimport useForm from '../util/hooks'\r\nimport {AuthContext} from '../util/auth'\r\nimport {useNavigate} from 'react-router'\r\nimport {gql, useMutation} from '@apollo/client'\r\n\r\nfunction Login() {\r\n    const {onChange,onSubmit,values} = useForm(loginUserCallback,{\r\n        username: '',\r\n        password: ''\r\n    })\r\n    const [errors,setErrors] = useState({})\r\n    const context = useContext(AuthContext);\r\n    const Navigate = useNavigate();\r\n\r\n    const [loginUser,{loading}] = useMutation(LOGIN_USER,{\r\n        update(_,{data:{login: userData}}){\r\n            \r\n            context.login(userData)\r\n            Navigate('/Products')\r\n        },\r\n        onError(err){\r\n            console.log(err.graphQLErrors[0].extensions.errors)\r\n            setErrors(err.graphQLErrors[0].extensions.errors)\r\n        },\r\n        variables: values\r\n    })\r\n\r\n    function loginUserCallback(){\r\n        loginUser()\r\n    }\r\n    return(\r\n        <div className=\"login-container\">\r\n        <div className=\"form-container\">\r\n           <Form onSubmit={onSubmit} className={loading?'loading':''}>\r\n             <Form.Field>\r\n      <label>Username</label>\r\n      <input \r\n      placeholder='Username'\r\n      name='username'\r\n      type='text'\r\n      value={values.username}\r\n      onChange={onChange} />\r\n      \r\n            </Form.Field>\r\n            <Form.Field>\r\n      <label>Password</label>\r\n      <input\r\n       placeholder='Password'\r\n      name='password'\r\n      type='password' \r\n      value={values.password} \r\n      onChange={onChange}/>\r\n           </Form.Field>\r\n           <Form.Field>\r\n      <Checkbox label='I agree to the Terms and Conditions' />\r\n    </Form.Field>\r\n    <Button type='submit' >Login</Button>\r\n  \r\n           </Form>\r\n           {Object.keys(errors).length > 0 && \r\n        <div className='ui error message'>\r\n            <ul className='list'>\r\n                {Object.values(errors).map((value)=>(\r\n                <li key={value}>{value}</li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n        }\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\nconst LOGIN_USER = gql`\r\n   mutation login(\r\n       $username: String!\r\n       $password: String!\r\n   ){\r\n       login(username:$username,password:$password){\r\n           id\r\n           username\r\n           email\r\n           token\r\n           createdAt\r\n       }\r\n   }\r\n`\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}