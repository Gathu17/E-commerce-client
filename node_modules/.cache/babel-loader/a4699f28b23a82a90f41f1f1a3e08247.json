{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/GATHU/Desktop/E-client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"C:/Users/GATHU/Desktop/E-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject;import React,{useState,useContext}from'react';import{Button,Checkbox,Form}from'semantic-ui-react';import{gql,useMutation}from'@apollo/client';import useForm from'../util/hooks';import{AuthContext}from'../util/auth';import{useNavigate}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){var context=useContext(AuthContext);var Navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useForm=useForm(registerUser,{username:'',email:'',password:'',confirmPassword:''}),onChange=_useForm.onChange,onSubmit=_useForm.onSubmit,values=_useForm.values;var _useMutation=useMutation(REGISTER_USER,{update:function update(_,_ref){var userData=_ref.data.register;console.log(userData);context.login(userData);Navigate('/Products');},onError:function onError(err){console.log(err.graphQLErrors[0].extensions.errors);setErrors(err.graphQLErrors[0].extensions.errors);},variables:values}),_useMutation2=_slicedToArray(_useMutation,2),addUser=_useMutation2[0],loading=_useMutation2[1].loading;function registerUser(){addUser();}return/*#__PURE__*/_jsx(\"div\",{className:\"register-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,className:loading?'loading':'',children:[/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Username\",name:\"username\",type:\"text\",value:values.username,onChange:onChange})]}),/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",name:\"email\",type:\"text\",value:values.email,onChange:onChange})]}),/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",name:\"password\",type:\"text\",value:values.password,onChange:onChange})]}),/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Confirm Password\",name:\"confirmPassword\",type:\"text\",value:values.confirmPassword,onChange:onChange})]}),/*#__PURE__*/_jsx(Form.Field,{children:/*#__PURE__*/_jsx(Checkbox,{label:\"I agree to the Terms and Conditions\"})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Submit\"})]}),Object.keys(errors).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"ui error message\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:Object.values(errors).map(function(value){return/*#__PURE__*/_jsx(\"li\",{children:value},value);})})})]})});}var REGISTER_USER=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  mutation Register(\\n    $username: String!\\n    $email: String!\\n    $password: String!\\n    $confirmPassword: String!\\n  ){\\n    register(\\n      registerInput:{\\n        username: $username\\n        email: $email\\n        password: $password\\n        confirmPassword: $confirmPassword\\n      }\\n    ){id email username createdAt token}\\n  }\\n\"])));export default Register;","map":{"version":3,"sources":["C:/Users/GATHU/Desktop/E-client/src/Pages/Register.js"],"names":["React","useState","useContext","Button","Checkbox","Form","gql","useMutation","useForm","AuthContext","useNavigate","Register","context","Navigate","errors","setErrors","registerUser","username","email","password","confirmPassword","onChange","onSubmit","values","REGISTER_USER","update","_","userData","data","register","console","log","login","onError","err","graphQLErrors","extensions","variables","addUser","loading","Object","keys","length","map","value"],"mappings":"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","sourcesContent":["import React, { useState,useContext } from 'react';\r\nimport { Button, Checkbox, Form } from 'semantic-ui-react'\r\nimport {gql, useMutation} from '@apollo/client'\r\nimport useForm from '../util/hooks'\r\nimport {AuthContext} from '../util/auth'\r\nimport {useNavigate} from 'react-router'\r\nfunction Register (){\r\n  const context = useContext(AuthContext)\r\n  const Navigate = useNavigate()\r\n  const [errors, setErrors] = useState({})\r\n  const {onChange,onSubmit,values} = useForm(registerUser, {\r\n    username:'',\r\n    email:'',\r\n    password:'',\r\n    confirmPassword:''\r\n  })\r\n\r\n  const [addUser,{loading}] = useMutation(REGISTER_USER,{\r\n   update(_,{data:{register:userData}}){\r\n     console.log(userData);\r\n     context.login(userData);\r\n     Navigate('/Products')\r\n   },\r\n   onError(err){\r\n    console.log(err.graphQLErrors[0].extensions.errors)\r\n    setErrors(err.graphQLErrors[0].extensions.errors)\r\n   },\r\n   variables: values\r\n  })\r\n\r\n  function registerUser(){\r\n    addUser();\r\n  }\r\n    return (\r\n<div className=\"register-container\">\r\n  <div className='form-container'>\r\n        <Form onSubmit={onSubmit} className={loading?'loading':''}>\r\n    <Form.Field>\r\n      <label>Username</label>\r\n      <input \r\n      placeholder='Username'\r\n      name='username'\r\n      type='text'\r\n      value={values.username}\r\n      onChange={onChange} />\r\n      \r\n    </Form.Field>\r\n    <Form.Field>\r\n      <label>Email</label>\r\n      <input\r\n       placeholder='Email'\r\n      name='email'\r\n      type='text' \r\n      value={values.email} \r\n      onChange={onChange}/>\r\n    </Form.Field>\r\n    <Form.Field>\r\n      <label>Password</label>\r\n      <input \r\n      placeholder='Password'\r\n      name='password'\r\n      type='text' \r\n      value={values.password} \r\n      onChange={onChange}/>\r\n    </Form.Field>\r\n    <Form.Field>\r\n      <label>Confirm Password</label>\r\n      <input \r\n      placeholder='Confirm Password' \r\n      name='confirmPassword'\r\n      type='text'\r\n      value={values.confirmPassword}\r\n      onChange={onChange} />\r\n    </Form.Field>\r\n    <Form.Field>\r\n      <Checkbox label='I agree to the Terms and Conditions' />\r\n    </Form.Field>\r\n    <Button type='submit' >Submit</Button>\r\n  </Form>\r\n  {Object.keys(errors).length > 0 && \r\n        <div className='ui error message'>\r\n            <ul className='list'>\r\n                {Object.values(errors).map((value)=>(\r\n                <li key={value}>{value}</li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n        }\r\n  </div>\r\n  </div>  \r\n    )\r\n  \r\n    }\r\nconst REGISTER_USER = gql`\r\n  mutation Register(\r\n    $username: String!\r\n    $email: String!\r\n    $password: String!\r\n    $confirmPassword: String!\r\n  ){\r\n    register(\r\n      registerInput:{\r\n        username: $username\r\n        email: $email\r\n        password: $password\r\n        confirmPassword: $confirmPassword\r\n      }\r\n    ){id email username createdAt token}\r\n  }\r\n`\r\n\r\nexport default Register"]},"metadata":{},"sourceType":"module"}