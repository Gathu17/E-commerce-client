{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/GATHU/Desktop/E-client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"C:/Users/GATHU/Desktop/E-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2;import React,{useState}from'react';import{gql,useMutation}from'@apollo/client';import{Icon,Confirm,Button}from'semantic-ui-react';import{GET_CART}from'../util/graphql';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DeleteCart(_ref){var productId=_ref.productId,name=_ref.name,callback=_ref.callback;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),confirmOpen=_useState2[0],setConfirmOpen=_useState2[1];var mutation=name?DELETE_PRODUCT:DELETE_CART;var _useMutation=useMutation(mutation,{update:function update(cache){if(!name){callback();var dataCart=cache.readQuery({query:GET_CART});var newData=dataCart.getCart;newData=dataCart.getCart.products.filter(function(p){return p.id!==productId;});cache.writeQuery({query:GET_CART,data:{getCart:{products:newData}}});}console.log(data);},variables:{productId:productId}}),_useMutation2=_slicedToArray(_useMutation,2),deleteItem=_useMutation2[0],_useMutation2$=_useMutation2[1],loading=_useMutation2$.loading,data=_useMutation2$.data;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{color:\"red\",size:\"small\",floated:\"right\",style:{marginRight:10},onClick:function onClick(){return setConfirmOpen(true);},children:/*#__PURE__*/_jsx(Icon,{name:\"close\",style:{margin:0}})}),/*#__PURE__*/_jsx(Confirm,{open:confirmOpen,onCancel:function onCancel(){return setConfirmOpen(false);},onConfirm:deleteItem})]});}var DELETE_CART=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n   mutation deleteCart($productId:ID! ){\\n       deleteCart(productId:$productId)\\n   }\\n\"])));var DELETE_PRODUCT=gql(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    mutation deleteProduct($productId:ID! ){\\n       deleteProduct(productId:$productId)\\n   }\\n\"])));export default DeleteCart;","map":{"version":3,"sources":["C:/Users/GATHU/Desktop/E-client/src/components/DeleteButton.js"],"names":["React","useState","gql","useMutation","Icon","Confirm","Button","GET_CART","DeleteCart","productId","name","callback","confirmOpen","setConfirmOpen","mutation","DELETE_PRODUCT","DELETE_CART","update","cache","dataCart","readQuery","query","newData","getCart","products","filter","p","id","writeQuery","data","console","log","variables","deleteItem","loading","marginRight","margin"],"mappings":"+RAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,KAA6B,OAA7B,CACA,OAAQC,GAAR,CAAYC,WAAZ,KAA8B,gBAA9B,CACA,OAAQC,IAAR,CAAaC,OAAb,CAAqBC,MAArB,KAAkC,mBAAlC,CACA,OAAQC,QAAR,KAAuB,iBAAvB,C,6IAEA,QAASC,CAAAA,UAAT,MAA8C,IAAzBC,CAAAA,SAAyB,MAAzBA,SAAyB,CAAfC,IAAe,MAAfA,IAAe,CAAVC,QAAU,MAAVA,QAAU,CAC1C,cAAoCV,QAAQ,CAAC,KAAD,CAA5C,wCAAMW,WAAN,eAAkBC,cAAlB,eACA,GAAMC,CAAAA,QAAQ,CAAGJ,IAAI,CAAGK,cAAH,CAAoBC,WAAzC,CACA,iBAAoCb,WAAW,CAACW,QAAD,CAAU,CACrDG,MADqD,iBAC9CC,KAD8C,CACxC,CACX,GAAG,CAACR,IAAJ,CAAS,CACPC,QAAQ,GACR,GAAMQ,CAAAA,QAAQ,CAAGD,KAAK,CAACE,SAAN,CAAgB,CAC7BC,KAAK,CAAEd,QADsB,CAAhB,CAAjB,CAGA,GAAIe,CAAAA,OAAO,CAAGH,QAAQ,CAACI,OAAvB,CACED,OAAO,CAAGH,QAAQ,CAACI,OAAT,CAAiBC,QAAjB,CAA0BC,MAA1B,CAAiC,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,EAAF,GAASlB,SAAb,EAAlC,CAAV,CACAS,KAAK,CAACU,UAAN,CAAiB,CAACP,KAAK,CAACd,QAAP,CACfsB,IAAI,CAAC,CAACN,OAAO,CAAC,CAACC,QAAQ,CAACF,OAAV,CAAT,CADU,CAAjB,EAED,CACDQ,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACD,CAbkD,CAcrDG,SAAS,CAAE,CAACvB,SAAS,CAATA,SAAD,CAd0C,CAAV,CAA/C,8CAAOwB,UAAP,kDAAmBC,OAAnB,gBAAmBA,OAAnB,CAA2BL,IAA3B,gBAA2BA,IAA3B,CAgBA,mBACI,wCACA,KAAC,MAAD,EAAS,KAAK,CAAC,KAAf,CAAqB,IAAI,CAAC,OAA1B,CAAkC,OAAO,CAAC,OAA1C,CAAkD,KAAK,CAAE,CAACM,WAAW,CAAE,EAAd,CAAzD,CAA4E,OAAO,CAAE,yBAAKtB,CAAAA,cAAc,CAAC,IAAD,CAAnB,EAArF,uBACA,KAAC,IAAD,EAAM,IAAI,CAAC,OAAX,CAAmB,KAAK,CAAE,CAACuB,MAAM,CAAC,CAAR,CAA1B,EADA,EADA,cAIA,KAAC,OAAD,EACF,IAAI,CAAExB,WADJ,CAEF,QAAQ,CAAE,0BAAIC,CAAAA,cAAc,CAAC,KAAD,CAAlB,EAFR,CAGF,SAAS,CAAEoB,UAHT,EAJA,GADJ,CAYH,CAED,GAAMjB,CAAAA,WAAW,CAAGd,GAAH,4JAAjB,CAKA,GAAMa,CAAAA,cAAc,CAAGb,GAAH,qKAApB,CAMA,cAAeM,CAAAA,UAAf","sourcesContent":["import React,{useState} from 'react'\r\nimport {gql,useMutation} from '@apollo/client'\r\nimport {Icon,Confirm,Button} from 'semantic-ui-react'\r\nimport {GET_CART} from '../util/graphql'\r\n\r\nfunction DeleteCart({productId,name,callback}){\r\n    const[confirmOpen,setConfirmOpen] = useState(false)\r\n    const mutation = name ? DELETE_PRODUCT : DELETE_CART;\r\n    const [deleteItem,{loading,data}] = useMutation(mutation,{\r\n        update(cache){\r\n          if(!name){\r\n            callback()\r\n            const dataCart = cache.readQuery({\r\n                query: GET_CART\r\n              })\r\n            let newData = dataCart.getCart\r\n              newData = dataCart.getCart.products.filter(p => p.id !== productId)\r\n              cache.writeQuery({query:GET_CART, \r\n                data:{getCart:{products:newData}}})\r\n            }\r\n            console.log(data)\r\n          }, \r\n        variables: {productId}\r\n    })\r\n    return(\r\n        <>\r\n        <Button  color='red' size=\"small\" floated='right' style={{marginRight: 10}} onClick={()=> setConfirmOpen(true)}>\r\n        <Icon name='close' style={{margin:0}}/>\r\n      </Button>\r\n        <Confirm\r\n      open={confirmOpen}\r\n      onCancel={()=>setConfirmOpen(false)}\r\n      onConfirm={deleteItem}\r\n      />\r\n        </>   \r\n    )\r\n}\r\n\r\nconst DELETE_CART = gql`\r\n   mutation deleteCart($productId:ID! ){\r\n       deleteCart(productId:$productId)\r\n   }\r\n`\r\nconst DELETE_PRODUCT = gql`\r\n    mutation deleteProduct($productId:ID! ){\r\n       deleteProduct(productId:$productId)\r\n   }\r\n`\r\n\r\nexport default DeleteCart;"]},"metadata":{},"sourceType":"module"}